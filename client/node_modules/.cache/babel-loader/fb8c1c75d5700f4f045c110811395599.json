{"ast":null,"code":"var _jsxFileName = \"/Users/danielliu/Documents/ReactProjects/food-reviewer/client/src/Components/ReviewForm/ReviewForm.js\";\nimport React from 'react';\nimport './ReviewForm.css';\n\nclass ReviewForm extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      dish_name: '',\n      dish_rating: '',\n      dish_description: '',\n      dish_img_path: '',\n      user: '',\n      errors: false\n    };\n    this.handleNameChange = this.handleNameChange.bind(this);\n    this.handleUserChange = this.handleUserChange.bind(this);\n    this.handleRatingChange = this.handleRatingChange.bind(this);\n    this.handleDescriptionChange = this.handleDescriptionChange.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n  }\n\n  handleNameChange(e) {\n    this.setState({\n      dish_name: e.target.value\n    });\n  }\n\n  handleRatingChange(e) {\n    this.setState({\n      dish_rating: e.target.value\n    });\n  }\n\n  handleDescriptionChange(e) {\n    this.setState({\n      dish_description: e.target.value\n    });\n  }\n\n  handleUserChange(e) {\n    this.setState({\n      user: e.target.value\n    });\n  }\n\n  handleSubmit(e) {\n    //send a POST request to /review (add it to the database)\n    var today = new Date();\n    var dd = String(today.getDate()).padStart(2, '0');\n    var mm = String(today.getMonth() + 1).padStart(2, '0'); //January is 0!\n\n    var yyyy = today.getFullYear();\n    today = yyyy + '-' + mm + '-' + dd;\n    const body = {\n      review_id: 0,\n      restaurant_id: this.props.restaurantId,\n      user_id: this.state.user,\n      review_date: today,\n      dish_name: this.state.dish_name,\n      dish_rating: this.state.dish_rating,\n      dish_description: this.state.dish_description,\n      dish_img_path: this.state.dish_img_path\n    };\n    fetch('/review', {\n      method: \"post\",\n      body: JSON.stringify(body),\n      headers: {\n        \"Content-Type\": \"application/json\"\n      }\n    }).then(res => {\n      if (res.status != 200) {\n        this.setState({\n          errors: true\n        });\n      }\n\n      return res.json();\n    }).catch(err => {\n      console.log('abcd');\n      console.log(err);\n      console.log(this.state.errors);\n      this.setState({\n        errors: true\n      });\n    }); //.then(window.location.reload(false))\n\n    e.preventDefault();\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"Review-Form\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"h1\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 17\n      }\n    }, \"Review a dish!\"), /*#__PURE__*/React.createElement(\"form\", {\n      onSubmit: this.handleSubmit,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      id: \"name\",\n      placeholder: \"Name of dish\",\n      onChange: this.handleNameChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 25\n      }\n    }), /*#__PURE__*/React.createElement(\"input\", {\n      id: \"user\",\n      placeholder: \"Your name\",\n      onChange: this.handleUserChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 25\n      }\n    }), /*#__PURE__*/React.createElement(\"input\", {\n      id: \"rating\",\n      placeholder: \"Rating (out of 5!)\",\n      onChange: this.handleRatingChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 25\n      }\n    }), /*#__PURE__*/React.createElement(\"textarea\", {\n      id: \"description\",\n      placeholder: \"How was it?\",\n      onChange: this.handleDescriptionChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 25\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      id: \"submit\",\n      type: \"submit\",\n      value: \"Post\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 25\n      }\n    }), this.state.errors && /*#__PURE__*/React.createElement(\"h4\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 47\n      }\n    }, \"Error in submitting form\"))));\n  }\n\n}\n\nexport default ReviewForm;","map":{"version":3,"sources":["/Users/danielliu/Documents/ReactProjects/food-reviewer/client/src/Components/ReviewForm/ReviewForm.js"],"names":["React","ReviewForm","Component","constructor","props","state","dish_name","dish_rating","dish_description","dish_img_path","user","errors","handleNameChange","bind","handleUserChange","handleRatingChange","handleDescriptionChange","handleSubmit","e","setState","target","value","today","Date","dd","String","getDate","padStart","mm","getMonth","yyyy","getFullYear","body","review_id","restaurant_id","restaurantId","user_id","review_date","fetch","method","JSON","stringify","headers","then","res","status","json","catch","err","console","log","preventDefault","render"],"mappings":"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","sourcesContent":["import React from 'react';\nimport './ReviewForm.css';\n\nclass ReviewForm extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            dish_name: '',\n            dish_rating: '',\n            dish_description: '',\n            dish_img_path: '',\n            user: '',\n            errors: false\n        }\n        this.handleNameChange=this.handleNameChange.bind(this);\n        this.handleUserChange=this.handleUserChange.bind(this);\n        this.handleRatingChange=this.handleRatingChange.bind(this);\n        this.handleDescriptionChange=this.handleDescriptionChange.bind(this);\n        this.handleSubmit = this.handleSubmit.bind(this);\n    }\n    handleNameChange(e) {\n        this.setState({dish_name: e.target.value});\n    }\n    handleRatingChange(e) {\n        this.setState({dish_rating: e.target.value});\n    }\n    handleDescriptionChange(e) {\n        this.setState({dish_description: e.target.value});\n    }\n    handleUserChange(e) {\n        this.setState({user: e.target.value});\n    }\n    handleSubmit(e) { //send a POST request to /review (add it to the database)\n        var today = new Date();\n        var dd = String(today.getDate()).padStart(2, '0');\n        var mm = String(today.getMonth() + 1).padStart(2, '0'); //January is 0!\n        var yyyy = today.getFullYear();\n        today = yyyy + '-' + mm + '-' + dd;\n\n        const body = {\n            review_id: 0,\n            restaurant_id: this.props.restaurantId,\n            user_id: this.state.user,\n            review_date: today,\n            dish_name: this.state.dish_name,\n            dish_rating: this.state.dish_rating,\n            dish_description: this.state.dish_description,\n            dish_img_path: this.state.dish_img_path\n        };\n        \n        \n        fetch('/review', {\n            method: \"post\",\n            body: JSON.stringify(body),\n            headers: { \"Content-Type\": \"application/json\" }\n        }).then(res => {\n            if(res.status != 200) {\n                this.setState({errors: true});\n            }\n            return res.json();\n        })\n        \n        .catch(err => {\n            console.log('abcd');\n            console.log(err);\n            \n            console.log(this.state.errors);\n            this.setState({errors: true});\n        });\n//.then(window.location.reload(false))\n        e.preventDefault();\n    }\n    render() {\n        return (    \n            <div className = \"Review-Form\">\n                <h1>Review a dish!</h1>\n                <form onSubmit = {this.handleSubmit}>\n                    <div>\n                        <input id = \"name\" placeholder = \"Name of dish\" onChange = {this.handleNameChange}/>\n                        <input id = \"user\" placeholder = \"Your name\" onChange = {this.handleUserChange}/>\n                        <input id = \"rating\" placeholder = \"Rating (out of 5!)\" onChange = {this.handleRatingChange}/>\n                        <textarea id = \"description\" placeholder = \"How was it?\" onChange = {this.handleDescriptionChange}/>\n                    </div>\n                    <div>\n                        <input id = \"submit\" type = 'submit' value = 'Post'/>\n                        {this.state.errors && <h4>Error in submitting form</h4>}\n                    </div>\n                </form>\n            </div>\n        );\n    }\n}\n\n\nexport default ReviewForm;"]},"metadata":{},"sourceType":"module"}