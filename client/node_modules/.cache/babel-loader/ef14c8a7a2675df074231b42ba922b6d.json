{"ast":null,"code":"import _classCallCheck from\"/Users/danielliu/Documents/ReactProjects/dish/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/danielliu/Documents/ReactProjects/dish/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/Users/danielliu/Documents/ReactProjects/dish/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/Users/danielliu/Documents/ReactProjects/dish/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/danielliu/Documents/ReactProjects/dish/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from'react';import'./ReviewForm.css';var ReviewForm=/*#__PURE__*/function(_React$Component){_inherits(ReviewForm,_React$Component);var _super=_createSuper(ReviewForm);function ReviewForm(props){var _this;_classCallCheck(this,ReviewForm);_this=_super.call(this,props);_this.state={dish_name:'',dish_rating:'',dish_description:'',dish_img_path:'',user:'',errors:false};_this.handleNameChange=_this.handleNameChange.bind(_assertThisInitialized(_this));_this.handleUserChange=_this.handleUserChange.bind(_assertThisInitialized(_this));_this.handleRatingChange=_this.handleRatingChange.bind(_assertThisInitialized(_this));_this.handleDescriptionChange=_this.handleDescriptionChange.bind(_assertThisInitialized(_this));_this.handleSubmit=_this.handleSubmit.bind(_assertThisInitialized(_this));return _this;}_createClass(ReviewForm,[{key:\"handleNameChange\",value:function handleNameChange(e){this.setState({dish_name:e.target.value});}},{key:\"handleRatingChange\",value:function handleRatingChange(e){this.setState({dish_rating:e.target.value});}},{key:\"handleDescriptionChange\",value:function handleDescriptionChange(e){this.setState({dish_description:e.target.value});}},{key:\"handleUserChange\",value:function handleUserChange(e){this.setState({user:e.target.value});}},{key:\"handleSubmit\",value:function handleSubmit(e){var _this2=this;//send a POST request to /review (add it to the database)\nthis.setState({errors:false});var today=new Date();var dd=String(today.getDate()).padStart(2,'0');var mm=String(today.getMonth()+1).padStart(2,'0');//January is 0!\nvar yyyy=today.getFullYear();today=yyyy+'-'+mm+'-'+dd;var body={review_id:0,restaurant_id:this.props.restaurantId,user_id:this.state.user,review_date:today,dish_name:this.state.dish_name,dish_rating:this.state.dish_rating,dish_description:this.state.dish_description,dish_img_path:this.state.dish_img_path};fetch('/review',{method:\"post\",body:JSON.stringify(body),headers:{\"Content-Type\":\"application/json\"}}).then(function(res){if(res.status!=200){_this2.setState({errors:true});}return res.json();}).then(function(json){if(!_this2.state.errors){window.location.reload(false);}}).catch(function(err){console.log(err);});e.preventDefault();}},{key:\"render\",value:function render(){return/*#__PURE__*/React.createElement(\"div\",{className:\"Review-Form\"},/*#__PURE__*/React.createElement(\"h1\",null,\"Review a dish!\"),/*#__PURE__*/React.createElement(\"form\",{onSubmit:this.handleSubmit},/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"input\",{id:\"name\",placeholder:\"Name of dish\",onChange:this.handleNameChange}),/*#__PURE__*/React.createElement(\"input\",{id:\"user\",placeholder:\"Your name\",onChange:this.handleUserChange}),/*#__PURE__*/React.createElement(\"input\",{id:\"rating\",placeholder:\"Rating (out of 5)\",onChange:this.handleRatingChange}),/*#__PURE__*/React.createElement(\"textarea\",{id:\"description\",placeholder:\"How was it?\",onChange:this.handleDescriptionChange})),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"input\",{id:\"submit\",type:\"submit\",value:\"Post\"}),this.state.errors&&/*#__PURE__*/React.createElement(\"h4\",null,\"Error in submitting form\"))));}}]);return ReviewForm;}(React.Component);export default ReviewForm;","map":{"version":3,"sources":["/Users/danielliu/Documents/ReactProjects/dish/client/src/Components/ReviewForm/ReviewForm.js"],"names":["React","ReviewForm","props","state","dish_name","dish_rating","dish_description","dish_img_path","user","errors","handleNameChange","bind","handleUserChange","handleRatingChange","handleDescriptionChange","handleSubmit","e","setState","target","value","today","Date","dd","String","getDate","padStart","mm","getMonth","yyyy","getFullYear","body","review_id","restaurant_id","restaurantId","user_id","review_date","fetch","method","JSON","stringify","headers","then","res","status","json","window","location","reload","catch","err","console","log","preventDefault","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport './ReviewForm.css';\n\nclass ReviewForm extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            dish_name: '',\n            dish_rating: '',\n            dish_description: '',\n            dish_img_path: '',\n            user: '',\n            errors: false\n        }\n        this.handleNameChange=this.handleNameChange.bind(this);\n        this.handleUserChange=this.handleUserChange.bind(this);\n        this.handleRatingChange=this.handleRatingChange.bind(this);\n        this.handleDescriptionChange=this.handleDescriptionChange.bind(this);\n        this.handleSubmit = this.handleSubmit.bind(this);\n    }\n    handleNameChange(e) {\n        this.setState({dish_name: e.target.value});\n    }\n    handleRatingChange(e) {\n        this.setState({dish_rating: e.target.value});\n    }\n    handleDescriptionChange(e) {\n        this.setState({dish_description: e.target.value});\n    }\n    handleUserChange(e) {\n        this.setState({user: e.target.value});\n    }\n    handleSubmit(e) { //send a POST request to /review (add it to the database)\n        this.setState({errors: false});\n        var today = new Date();\n        var dd = String(today.getDate()).padStart(2, '0');\n        var mm = String(today.getMonth() + 1).padStart(2, '0'); //January is 0!\n        var yyyy = today.getFullYear();\n        today = yyyy + '-' + mm + '-' + dd;\n\n        const body = {\n            review_id: 0,\n            restaurant_id: this.props.restaurantId,\n            user_id: this.state.user,\n            review_date: today,\n            dish_name: this.state.dish_name,\n            dish_rating: this.state.dish_rating,\n            dish_description: this.state.dish_description,\n            dish_img_path: this.state.dish_img_path\n        };\n        \n        \n        fetch('/review', {\n            method: \"post\",\n            body: JSON.stringify(body),\n            headers: { \"Content-Type\": \"application/json\" }\n        }).then(res => {\n            if(res.status != 200) {\n                this.setState({errors: true});\n            }\n            return res.json();\n\n        }).then( json => {\n                if(!this.state.errors) {\n                    window.location.reload(false);\n                }\n            }\n        ) \n        .catch(err => {\n            console.log(err);\n        });\n        e.preventDefault();\n    }\n    render() {\n        return (    \n            <div className = \"Review-Form\">\n                <h1>Review a dish!</h1>\n                <form onSubmit = {this.handleSubmit}>\n                    <div>\n                        <input id = \"name\" placeholder = \"Name of dish\" onChange = {this.handleNameChange}/>\n                        <input id = \"user\" placeholder = \"Your name\" onChange = {this.handleUserChange}/>\n                        <input id = \"rating\" placeholder = \"Rating (out of 5)\" onChange = {this.handleRatingChange}/>\n                        <textarea id = \"description\" placeholder = \"How was it?\" onChange = {this.handleDescriptionChange}/>\n                    </div>\n                    <div>\n                        <input id = \"submit\" type = 'submit' value = 'Post'/>\n                        {this.state.errors && <h4>Error in submitting form</h4>}\n                    </div>\n                </form>\n            </div>\n        );\n    }\n}\n\n\nexport default ReviewForm;"]},"metadata":{},"sourceType":"module"}