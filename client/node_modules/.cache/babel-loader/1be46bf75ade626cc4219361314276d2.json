{"ast":null,"code":"import _classCallCheck from\"/Users/danielliu/Documents/ReactProjects/dish/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/danielliu/Documents/ReactProjects/dish/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/Users/danielliu/Documents/ReactProjects/dish/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/Users/danielliu/Documents/ReactProjects/dish/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/danielliu/Documents/ReactProjects/dish/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from'react';import'./SmallSearchBar.css';import{Link,withRouter}from'react-router-dom';import MapQuest from'../../util/MapQuest';var apiKey='u5mrF79LEqZx7JFwOyifoKT2a3ILGvRE';var SmallSearchBar=/*#__PURE__*/function(_React$Component){_inherits(SmallSearchBar,_React$Component);var _super=_createSuper(SmallSearchBar);function SmallSearchBar(props){var _this;_classCallCheck(this,SmallSearchBar);_this=_super.call(this,props);var initial='';if(localStorage.getItem('initialLocation')){initial=localStorage.getItem('initialLocation');}var queryString=window.location.search;var urlParams=new URLSearchParams(queryString);var term='';if(urlParams.has('term')){term=urlParams.get('term');}var location='';if(urlParams.has('location')){location=urlParams.get('location');}_this.state={term:term,initialLocation:initial,location:location};_this.handleTermChange=_this.handleTermChange.bind(_assertThisInitialized(_this));_this.handleLocationChange=_this.handleLocationChange.bind(_assertThisInitialized(_this));_this.handleSearch=_this.handleSearch.bind(_assertThisInitialized(_this));return _this;}_createClass(SmallSearchBar,[{key:\"handleTermChange\",value:function handleTermChange(e){this.setState({term:e.target.value});}},{key:\"handleLocationChange\",value:function handleLocationChange(e){this.setState({location:e.target.value});}},{key:\"handleSearch\",value:function handleSearch(e){e.preventDefault();if(this.state.location===''){this.setState({location:this.state.initialLocation});this.props.history.push(\"/search?term=\".concat(this.state.term,\"&location=\").concat(this.state.initialLocation));}else{this.props.history.push(\"/search?term=\".concat(this.state.term,\"&location=\").concat(this.state.location));//redirect url\n}window.location.reload(false);}},{key:\"render\",value:function render(){return/*#__PURE__*/React.createElement(\"div\",{className:\"SmallSearchBar-container\"},/*#__PURE__*/React.createElement(Link,{className:\"logo-container\",to:\"/\",style:{textDecoration:'none'}},/*#__PURE__*/React.createElement(\"div\",{className:\"logo-text\"},/*#__PURE__*/React.createElement(\"h3\",{id:\"logo\"},\" d i s h \"))),/*#__PURE__*/React.createElement(\"form\",{className:\"searchForm\",onSubmit:this.handleSearch},/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"input\",{className:\"SmallSearchBar-fields\",placeholder:\"Search by business\",value:this.state.term,onChange:this.handleTermChange}),/*#__PURE__*/React.createElement(\"input\",{className:\"SmallSearchBar-fields\",placeholder:\"Enter location\",value:this.state.location,onChange:this.handleLocationChange}),/*#__PURE__*/React.createElement(\"input\",{className:\"SmallSearchBar-submit\",type:\"submit\",value:\"Search\"}))));}}]);return SmallSearchBar;}(React.Component);function handleErrors(response){if(!response.ok){throw Error(response.statusText);}return response.json();}export default withRouter(SmallSearchBar);","map":{"version":3,"sources":["/Users/danielliu/Documents/ReactProjects/dish/src/Components/SmallSearchBar/SmallSearchBar.js"],"names":["React","Link","withRouter","MapQuest","apiKey","SmallSearchBar","props","initial","localStorage","getItem","queryString","window","location","search","urlParams","URLSearchParams","term","has","get","state","initialLocation","handleTermChange","bind","handleLocationChange","handleSearch","e","setState","target","value","preventDefault","history","push","reload","textDecoration","Component","handleErrors","response","ok","Error","statusText","json"],"mappings":"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","sourcesContent":["import React from 'react';\nimport './SmallSearchBar.css';\nimport { Link, withRouter } from 'react-router-dom';\nimport MapQuest from '../../util/MapQuest';\n\nconst apiKey = 'u5mrF79LEqZx7JFwOyifoKT2a3ILGvRE';\n\nclass SmallSearchBar extends React.Component {\n    constructor(props) {\n\t\tsuper(props);\n\t\tlet initial = '';\n\t\tif(localStorage.getItem('initialLocation')) {\n\t\t\tinitial = localStorage.getItem('initialLocation');\n\t\t}\n\t\tlet queryString = window.location.search;\n\t\tlet urlParams = new URLSearchParams(queryString);\n\t\tlet term = '';\n\t\tif(urlParams.has('term')) {\n\t\t\tterm = urlParams.get('term');\n\t\t}\n\t\tlet location = '';\n\t\tif(urlParams.has('location')) {\n\t\t\tlocation = urlParams.get('location');\n\t\t}\n\t\tthis.state = {\n\t\t\tterm: term,\n\t\t\tinitialLocation: initial,\n\t\t\tlocation: location\n\t\t};\n\t\tthis.handleTermChange = this.handleTermChange.bind(this);\n\t\tthis.handleLocationChange = this.handleLocationChange.bind(this);\n\t\tthis.handleSearch = this.handleSearch.bind(this);\n\t}\n\n    handleTermChange(e) {\n\t\tthis.setState({term: e.target.value});\n    }\n    handleLocationChange(e) {\n\t\tthis.setState({location: e.target.value});\n\t}\n\thandleSearch(e) {\n\t\te.preventDefault();\n\t\tif(this.state.location === '') {\n\t\t\tthis.setState({location: this.state.initialLocation});\n\t\t\tthis.props.history.push(`/search?term=${this.state.term}&location=${this.state.initialLocation}`);\n\t\t} else {\n\t\t\tthis.props.history.push(`/search?term=${this.state.term}&location=${this.state.location}`); //redirect url\n\t\t}\n\t\twindow.location.reload(false);\n\t}\n    render() {\n\t\treturn (\n\t\t\t<div className = \"SmallSearchBar-container\">\n\t\t\t\t<Link className = \"logo-container\" to = '/' style={{ textDecoration: 'none' }}>\n\t\t\t\t\t<div className = \"logo-text\">\n\t\t\t\t\t\t<h3 id=\"logo\"> d i s h </h3>\n\t\t\t\t\t</div>\n\t\t\t\t</Link>\n\t\t\t\t<form className = \"searchForm\" onSubmit = {this.handleSearch}>\n\t\t\t\t\t<div >\n\t\t\t\t\t\t<input className = \"SmallSearchBar-fields\" placeholder = \"Search by business\" value = {this.state.term} onChange = {this.handleTermChange}/>\n\t\t\t\t\t\t<input className = \"SmallSearchBar-fields\" placeholder = \"Enter location\" value = {this.state.location} onChange = {this.handleLocationChange} />\n\t\t\t\t\t\t<input className = \"SmallSearchBar-submit\" type = 'submit' value = 'Search'/>\n\t\t\t\t\t</div>\n\t\t\t\t</form>\n\t\t\t</div>\n\t\t);\n\t}\n\t\n\t\n\n}\n\n\nfunction handleErrors(response) {\n    if (!response.ok) {\n        throw Error(response.statusText);\n    }\n    return response.json();\n}\n\n\n\nexport default withRouter(SmallSearchBar);\n"]},"metadata":{},"sourceType":"module"}